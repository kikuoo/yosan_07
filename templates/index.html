{% extends 'base.html' %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>物件一覧</h1>
    <a href="{{ url_for('add_project') }}" class="btn btn-primary">新規物件追加</a>
</div>

<table class="table table-striped">
    <thead>
        <tr>
            <th>物件コード</th>
            <th>物件名</th>
            <th>請負金額</th>
            <th>実行予算額</th>
            <th>予算残額</th>
            <th>利益額</th>
            <th>利益率</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody>
        {% for project in projects %}
        <tr>
            <td>{{ project.project_code }}</td>
            <td>{{ project.project_name }}</td>
            <td>{{ "{:,}".format(project.contract_amount) }}円</td>
            <td>{{ "{:,}".format(project.budget_amount) }}円</td>
            <td class="text-end {% if project.remaining_budget < 0 %}text-danger{% endif %}">
                {{ "{:,}".format(project.remaining_budget) }}円
            </td>
            <td class="text-end {% if project.profit < 0 %}text-danger{% endif %}">
                {{ "{:,}".format(project.profit) }}円
            </td>
            <td class="text-end {% if project.profit_rate < 0 %}text-danger{% endif %}">
                {{ "%.1f"|format(project.profit_rate) }}%
            </td>
            <td>
                <a href="{{ url_for('work_type_list', project_id=project.id) }}" class="btn btn-sm btn-info">詳細</a>
                <a href="{{ url_for('edit_project', id=project.id) }}" class="btn btn-sm btn-primary">編集</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %} 